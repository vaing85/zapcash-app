"use strict";(self.webpackChunkzappay=self.webpackChunkzappay||[]).push([[613],{7613:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var r=t(5043),l=t(12),s=t(4292),o=t(7826),n=t(2145),i=t(579);const d=()=>{const{user:e}=(0,s.A)(),{paymentMethods:a,createPaymentIntent:t,isLoading:d}=(0,o.u)(),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[x,b]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[y,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(a.length>0&&!f){const e=a[0];h(e?e.id:a[0].id)}},[a,f]);return(0,i.jsx)("div",{className:"max-w-md mx-auto",children:(0,i.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl p-8 shadow-lg",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"\u26a1 Zap Money"}),(0,i.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),!c||!m||!f)return void n.oR.error("Please fill in all required fields");const r=parseFloat(m);if(r<=0)n.oR.error("Amount must be greater than 0");else if(r>e.balance)n.oR.error("Insufficient funds");else{g(!0);try{const e=await t(r,"USD",x||"Payment to ".concat(c));e.success?(n.oR.success("\u26a1 $".concat(r," zapped to ").concat(c)),u(""),p(""),b("")):n.oR.error(e.error||"Payment failed")}catch(l){n.oR.error("Payment processing failed")}finally{g(!1)}}},className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Email or Phone"}),(0,i.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"Enter email or phone number",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,i.jsx)("input",{type:"number",step:"0.01",value:m,onChange:e=>p(e.target.value),className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Available: $",null===e||void 0===e?void 0:e.balance.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),0===a.length?(0,i.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,i.jsx)("p",{className:"text-sm text-yellow-800",children:"No payment methods available. Please add a payment method first."})}):(0,i.jsx)("select",{value:f,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",required:!0,children:a.map(e=>{var a;return(0,i.jsxs)("option",{value:e.id,children:[e.billing_details.name||"Card"," ",null!==(a=e.card)&&void 0!==a&&a.last4?"(****".concat(e.card.last4,")"):""]},e.id)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note (Optional)"}),(0,i.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"What's this for?"})]}),(0,i.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white py-3 rounded-lg font-semibold hover:from-yellow-600 hover:to-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105",children:y?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Zapping..."]}):"\u26a1 Zap Money"})]})]})})}}}]);
//# sourceMappingURL=613.35ac2ac2.chunk.js.map