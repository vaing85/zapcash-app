"use strict";(self.webpackChunkzappay=self.webpackChunkzappay||[]).push([[354],{2354:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var s=a(5043),r=a(12),l=a(364),i=a(4292),d=a(8662),n=a(7504),c=a(6287),o=a(3315),x=a(2903),m=a(2683),g=a(5590),u=a(7012),h=a(579);const y=e=>{let{group:t,onClick:a}=e;return(0,h.jsxs)(r.P.div,{whileHover:{y:-4,scale:1.02},whileTap:{scale:.98},onClick:a,className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 cursor-pointer border border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",style:{backgroundColor:t.color},children:t.name.charAt(0)}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.description||"No description"})]})]}),(0,h.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((l=t.isActive,l?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100")),children:t.isActive?"Active":"Inactive"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(m.A,{className:"w-4 h-4 text-green-500"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),(0,h.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["$",t.totalExpenses.toFixed(2)]})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(o.A,{className:"w-4 h-4 text-blue-500"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Transactions"}),(0,h.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.totalTransactions})]})]})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(g.A,{className:"w-4 h-4 text-gray-500"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.members.length," members"]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(u.A,{className:"w-4 h-4 text-gray-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(s=t.updatedAt,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"flex -space-x-2",children:t.members.slice(0,3).map((e,t)=>(0,h.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800 bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-xs font-medium text-gray-700 dark:text-gray-300",style:{zIndex:3-t},children:e.firstName.charAt(0)},e.id))}),t.members.length>3&&(0,h.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["+",t.members.length-3," more"]})]}),(0,h.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,h.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("public"===t.settings.privacy?"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300":"private"===t.settings.privacy?"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300":"text-purple-600 bg-purple-100 dark:bg-purple-900 dark:text-purple-300"),children:"public"===t.settings.privacy?"Public":"private"===t.settings.privacy?"Private":"Invite Only"}),(0,h.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.settings.currency})]})]});var s,l};var p=a(9379),b=a(6938),j=a(7591),f=a(5989),N=a(4832),v=a(9531);const k=e=>{let{isOpen:t,onClose:a,onGroupCreated:d}=e;const{user:c}=(0,i.A)(),{createGroup:o,isLoading:x}=(0,l.w)(),[m,g]=(0,s.useState)({name:"",description:"",privacy:"private",allowMemberInvites:!0,requireApprovalForExpenses:!1,defaultSplitMethod:"equal",currency:"USD",color:"#3B82F6"}),[u,y]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),A=()=>{g({name:"",description:"",privacy:"private",allowMemberInvites:!0,requireApprovalForExpenses:!1,defaultSplitMethod:"equal",currency:"USD",color:"#3B82F6"}),w(null),y(!1)},C=()=>{A(),a()};return t?(0,h.jsx)(b.N,{children:(0,h.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,h.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,h.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50",onClick:C}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center",children:(0,h.jsx)(n.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create Group"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Start sharing expenses with friends"})]})]}),(0,h.jsx)("button",{onClick:C,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,h.jsx)(j.A,{className:"w-5 h-5"})})]}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c){w(null);try{const e={name:m.name,description:m.description,createdBy:c.id,members:[{id:"1",userId:c.id,email:c.email,firstName:c.firstName,lastName:c.lastName,profilePicture:c.profilePicture,role:"admin",joinedAt:(new Date).toISOString(),isActive:!0,totalContributed:0,totalOwed:0,balance:0}],settings:{allowMemberInvites:m.allowMemberInvites,requireApprovalForExpenses:m.requireApprovalForExpenses,defaultSplitMethod:m.defaultSplitMethod,currency:m.currency,notifications:{newExpenses:!0,paymentsReceived:!0,groupUpdates:!0,reminders:!0},privacy:m.privacy},isActive:!0,color:m.color};await o(e),d(),A()}catch(t){w(t instanceof Error?t.message:"Failed to create group")}}},className:"p-6 space-y-6",children:[k&&(0,h.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Name *"}),(0,h.jsx)("input",{type:"text",required:!0,value:m.name,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., Roommates, Vacation Fund"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,h.jsx)("textarea",{value:m.description,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Describe what this group is for..."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Color"}),(0,h.jsx)("div",{className:"flex space-x-2",children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6B7280"].map(e=>(0,h.jsx)("button",{type:"button",onClick:()=>g((0,p.A)((0,p.A)({},m),{},{color:e})),className:"w-8 h-8 rounded-full border-2 ".concat(m.color===e?"border-gray-900 dark:border-white":"border-gray-300 dark:border-gray-600"),style:{backgroundColor:e}},e))})]})]}),(0,h.jsxs)("button",{type:"button",onClick:()=>y(!u),className:"flex items-center space-x-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,h.jsx)(f.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"Advanced Settings"}),u?(0,h.jsx)(N.A,{className:"w-4 h-4"}):(0,h.jsx)(v.A,{className:"w-4 h-4"})]}),u&&(0,h.jsxs)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Privacy"}),(0,h.jsxs)("select",{value:m.privacy,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{privacy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,h.jsx)("option",{value:"private",children:"Private"}),(0,h.jsx)("option",{value:"invite-only",children:"Invite Only"}),(0,h.jsx)("option",{value:"public",children:"Public"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),(0,h.jsx)("select",{value:m.currency,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"\u20ac",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AUD",symbol:"A$",name:"Australian Dollar"}].map(e=>(0,h.jsxs)("option",{value:e.code,children:[e.symbol," ",e.name," (",e.code,")"]},e.code))})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Split Method"}),(0,h.jsxs)("select",{value:m.defaultSplitMethod,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{defaultSplitMethod:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,h.jsx)("option",{value:"equal",children:"Equal Split"}),(0,h.jsx)("option",{value:"percentage",children:"Percentage"}),(0,h.jsx)("option",{value:"custom",children:"Custom Amounts"})]})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,h.jsx)("input",{type:"checkbox",checked:m.allowMemberInvites,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{allowMemberInvites:e.target.checked})),className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Allow members to invite others"})]}),(0,h.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,h.jsx)("input",{type:"checkbox",checked:m.requireApprovalForExpenses,onChange:e=>g((0,p.A)((0,p.A)({},m),{},{requireApprovalForExpenses:e.target.checked})),className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Require approval for new expenses"})]})]})]}),(0,h.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,h.jsx)("button",{type:"button",onClick:C,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",disabled:x||!m.name.trim(),className:"flex-1 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:x?"Creating...":"Create Group"})]})]})]})]})})}):null};var w=a(4239),A=a(9626),C=a(2311),S=a(108),q=a(6992),F=a(6102),I=a(7869),D=a(3670),E=a(1474),P=a(7734),M=a(2185),R=a(760),B=a(1175);const U=e=>{let{group:t}=e;const{getGroupAnalytics:a,isLoading:i}=(0,l.w)(),[d,n]=(0,s.useState)(null),[c,x]=(0,s.useState)("month"),[u,y]=(0,s.useState)(null),p=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899"];(0,s.useEffect)(()=>{b()},[t.id,c]);const b=async()=>{try{y(null);const e=await a(t.id,c);n(e)}catch(e){y(e instanceof Error?e.message:"Failed to load analytics")}},j=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:t.settings.currency||"USD"}).format(e);return i&&!d?(0,h.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):u?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"text-red-500 mb-4",children:(0,h.jsx)(o.A,{className:"w-16 h-16 mx-auto"})}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Failed to load analytics"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:u}),(0,h.jsx)("button",{onClick:b,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):d?(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Group Analytics"}),(0,h.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["Insights and trends for ",t.name]})]}),(0,h.jsx)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[{id:"week",label:"This Week"},{id:"month",label:"This Month"},{id:"quarter",label:"This Quarter"},{id:"year",label:"This Year"}].map(e=>(0,h.jsx)("button",{onClick:()=>x(e.id),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors ".concat(c===e.id?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.label},e.id))})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:(0,h.jsx)(m.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,h.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j(d.totalExpenses)})]}),(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Expenses"})]}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:(0,h.jsx)(o.A,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,h.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.totalTransactions})]}),(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Transactions"})]}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:(0,h.jsx)(w.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,h.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j(d.averageExpense)})]}),(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Expense"})]}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:(0,h.jsx)(g.A,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,h.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.members.length})]}),(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Members"})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Spending by Category"}),d.topCategories.length>0?(0,h.jsx)("div",{className:"h-64",children:(0,h.jsx)(S.u,{width:"100%",height:"100%",children:(0,h.jsxs)(q.r,{children:[(0,h.jsx)(F.F,{data:d.topCategories,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{category:t,percentage:a}=e;return"".concat(t," (").concat("".concat(a.toFixed(1),"%"),")")},outerRadius:80,fill:"#8884d8",dataKey:"amount",children:d.topCategories.map((e,t)=>(0,h.jsx)(I.f,{fill:p[t%p.length]},"cell-".concat(t)))}),(0,h.jsx)(D.m,{formatter:e=>j(Number(e))})]})})}):(0,h.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No category data available"})]}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Member Spending"}),d.topSpenders.length>0?(0,h.jsx)("div",{className:"h-64",children:(0,h.jsx)(S.u,{width:"100%",height:"100%",children:(0,h.jsxs)(E.E,{data:d.topSpenders,children:[(0,h.jsx)(P.d,{strokeDasharray:"3 3"}),(0,h.jsx)(M.W,{dataKey:"name"}),(0,h.jsx)(R.h,{}),(0,h.jsx)(D.m,{formatter:e=>j(Number(e))}),(0,h.jsx)(B.y,{dataKey:"totalSpent",fill:"#3B82F6"})]})})}):(0,h.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No member data available"})]})]}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Member Balances"}),(0,h.jsx)("div",{className:"space-y-3",children:d.memberBalances.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.name.charAt(0)})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.totalOwed>0?"Owed: ".concat(j(e.totalOwed)):e.totalOwing>0?"Owes: ".concat(j(e.totalOwing)):"Balanced"})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("p",{className:"font-medium ".concat(e.netBalance>0?"text-green-600 dark:text-green-400":e.netBalance<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[e.netBalance>0?"+":"",j(e.netBalance)]}),(0,h.jsx)("div",{className:"flex items-center space-x-1",children:e.netBalance>0?(0,h.jsx)(A.A,{className:"w-4 h-4 text-green-500"}):e.netBalance<0?(0,h.jsx)(C.A,{className:"w-4 h-4 text-red-500"}):null})]})]},e.userId))})]}),d.insights.length>0&&(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Insights"}),(0,h.jsx)("div",{className:"space-y-2",children:d.insights.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[(0,h.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,h.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e})]},t))})]})]}):(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)(o.A,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No analytics data"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Analytics will appear once you have expenses in this group."})]})};var O=a(4538),T=a(7098),G=a(2811);const $=e=>{let{isOpen:t,onClose:a,onExpenseCreated:d,group:n}=e;const{user:c}=(0,i.A)(),{createExpense:o,isLoading:x}=(0,l.w)(),[g,u]=(0,s.useState)({title:"",description:"",amount:"",category:"Food",splitMethod:"equal",dueDate:"",tags:"",receipt:""}),[y,f]=(0,s.useState)([]),[N,v]=(0,s.useState)(null),k=()=>{u({title:"",description:"",amount:"",category:"Food",splitMethod:"equal",dueDate:"",tags:"",receipt:""}),f([]),v(null)},w=()=>{k(),a()};return s.useEffect(()=>{g.amount&&"equal"===g.splitMethod&&(()=>{const e=parseFloat(g.amount);if(!e||e<=0)return;const t=n.members.filter(e=>e.isActive);switch(g.splitMethod){case"equal":const a=e/t.length;f(t.map(e=>({userId:e.userId,amount:a,isPaid:!1,paidAmount:0,remainingAmount:a})));break;case"percentage":f(t.map(e=>({userId:e.userId,amount:0,percentage:100/t.length,isPaid:!1,paidAmount:0,remainingAmount:0})));break;case"custom":f(t.map(e=>({userId:e.userId,amount:0,isPaid:!1,paidAmount:0,remainingAmount:0})))}})()},[g.amount,g.splitMethod]),t?(0,h.jsx)(b.N,{children:(0,h.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,h.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,h.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50",onClick:w}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:(0,h.jsx)(m.A,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add Expense"}),(0,h.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Split expenses with ",n.name]})]})]}),(0,h.jsx)("button",{onClick:w,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,h.jsx)(j.A,{className:"w-5 h-5"})})]}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c)return;v(null);const t=y.reduce((e,t)=>e+t.amount,0),a=parseFloat(g.amount);if(Math.abs(t-a)>.01)v("Split amounts must equal the total expense amount");else try{const e={title:g.title,description:g.description,amount:a,currency:n.settings.currency,category:g.category,splitMethod:g.splitMethod,splits:y,dueDate:g.dueDate||void 0,tags:g.tags.split(",").map(e=>e.trim()).filter(e=>e),receipt:g.receipt||void 0};d(e),k()}catch(s){v(s instanceof Error?s.message:"Failed to create expense")}},className:"p-6 space-y-6",children:[N&&(0,h.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:N}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),(0,h.jsx)("input",{type:"text",required:!0,value:g.title,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., Dinner at Restaurant"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount *"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"$"})}),(0,h.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:g.amount,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{amount:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"0.00"})]})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,h.jsx)("textarea",{value:g.description,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Add details about this expense..."})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),(0,h.jsx)("select",{value:g.category,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:["Food","Transportation","Entertainment","Utilities","Shopping","Travel","Healthcare","Education","Other"].map(e=>(0,h.jsx)("option",{value:e,children:e},e))})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date"}),(0,h.jsx)("input",{type:"date",value:g.dueDate,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{dueDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Split Method"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"equal",label:"Equal Split",description:"Split equally among all members"},{id:"percentage",label:"Percentage",description:"Split by percentage"},{id:"custom",label:"Custom Amounts",description:"Set custom amounts for each member"}].map(e=>(0,h.jsxs)("button",{type:"button",onClick:()=>u((0,p.A)((0,p.A)({},g),{},{splitMethod:e.id})),className:"p-3 text-left border rounded-lg transition-colors ".concat(g.splitMethod===e.id?"border-green-500 bg-green-50 dark:bg-green-900 dark:border-green-400":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"),children:[(0,h.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]},e.id))})]}),y.length>0&&(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Split Details"}),(0,h.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>{const a=n.members.find(t=>t.userId===e.userId);return(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null===a||void 0===a?void 0:a.firstName.charAt(0))||"?"})}),(0,h.jsx)("div",{children:(0,h.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:a?"".concat(a.firstName," ").concat(a.lastName):"Unknown User"})})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:["percentage"===g.splitMethod&&(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:e.percentage||0,onChange:t=>((e,t)=>{const a=parseFloat(g.amount)*t/100;f(s=>s.map(s=>s.userId===e?(0,p.A)((0,p.A)({},s),{},{amount:a,percentage:t,remainingAmount:a-s.paidAmount}):s))})(e.userId,parseFloat(t.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-600 dark:text-white"}),(0,h.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-sm text-gray-500",children:"$"}),(0,h.jsx)("input",{type:"number",step:"0.01",min:"0",value:e.amount,onChange:t=>{return a=e.userId,s=parseFloat(t.target.value)||0,void f(e=>e.map(e=>e.userId===a?(0,p.A)((0,p.A)({},e),{},{amount:s,remainingAmount:s-e.paidAmount}):e));var a,s},className:"w-24 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm dark:bg-gray-600 dark:text-white"})]})]})]},e.userId)})}),(0,h.jsx)("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Total:"}),(0,h.jsxs)("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["$",y.reduce((e,t)=>e+t.amount,0).toFixed(2)]})]})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags (comma-separated)"}),(0,h.jsx)("input",{type:"text",value:g.tags,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{tags:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., dinner, restaurant, celebration"})]}),(0,h.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,h.jsx)("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",disabled:x||!g.title.trim()||!g.amount||0===y.length,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:x?"Creating...":"Create Expense"})]})]})]})]})})}):null},L=e=>{let{group:t}=e;const{user:a}=(0,i.A)(),{expenses:n,createExpense:c,updateExpense:o,payExpenseSplit:x,isLoading:y}=(0,l.w)(),[b,j]=(0,s.useState)(!1),[f,N]=(0,s.useState)(null),[v,k]=(0,s.useState)("all"),w=n.filter(e=>"all"===v||e.status===v),A=e=>{switch(e){case"completed":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300";case"partial":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300";case"pending":default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300"}},C=e=>{switch(e){case"completed":return(0,h.jsx)(O.A,{className:"w-4 h-4"});case"partial":case"pending":default:return(0,h.jsx)(u.A,{className:"w-4 h-4"});case"cancelled":return(0,h.jsx)(T.A,{className:"w-4 h-4"})}};return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Group Expenses"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage shared expenses and track payments"})]}),(0,h.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors mt-4 sm:mt-0",children:[(0,h.jsx)(d.A,{className:"w-5 h-5"}),(0,h.jsx)("span",{children:"Add Expense"})]})]}),(0,h.jsx)("div",{className:"flex space-x-2",children:[{id:"all",label:"All",count:n.length},{id:"pending",label:"Pending",count:n.filter(e=>"pending"===e.status).length},{id:"partial",label:"Partial",count:n.filter(e=>"partial"===e.status).length},{id:"completed",label:"Completed",count:n.filter(e=>"completed"===e.status).length}].map(e=>(0,h.jsxs)("button",{onClick:()=>k(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(v===e.id?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e.label," (",e.count,")"]},e.id))}),(0,h.jsx)("div",{className:"space-y-4",children:y?(0,h.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):0===w.length?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)(m.A,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No expenses found"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"all"===v?"Create your first expense to get started.":"No ".concat(v," expenses found.")}),"all"===v&&(0,h.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors",children:[(0,h.jsx)(d.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"Add Expense"})]})]}):w.map(e=>{return(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),(0,h.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(A(e.status)),children:[C(e.status),(0,h.jsx)("span",{className:"capitalize",children:e.status})]})]}),e.description&&(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:e.description}),(0,h.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(m.A,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:["$",e.amount.toFixed(2)]})]}),(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(g.A,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:[e.splits.length," people"]})]}),(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(u.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:(s=e.createdAt,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]})]})]}),(0,h.jsx)("div",{className:"flex items-center space-x-2",children:(0,h.jsx)("button",{onClick:()=>N(e),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,h.jsx)(G.A,{className:"w-4 h-4"})})})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Status"}),e.splits.map((s,r)=>{const l=t.members.find(e=>e.userId===s.userId),i=s.userId===(null===a||void 0===a?void 0:a.id),d=s.isPaid,n=s.remainingAmount;return(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:(null===l||void 0===l?void 0:l.firstName.charAt(0))||"?"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:l?"".concat(l.firstName," ").concat(l.lastName):"Unknown User"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Paid":"Owes $".concat(n.toFixed(2))})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",s.amount.toFixed(2)]}),s.paidAmount>0&&(0,h.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Paid: $",s.paidAmount.toFixed(2)]})]}),i&&!d&&n>0&&(0,h.jsx)("button",{onClick:()=>(async(e,t,s)=>{if(a)try{await x(e,t,s)}catch(r){console.error("Failed to pay expense split:",r)}})(e.id,s.userId,n),className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Pay Now"}),d&&(0,h.jsx)("div",{className:"text-green-600",children:(0,h.jsx)(O.A,{className:"w-5 h-5"})})]})]},r)})]}),e.tags.length>0&&(0,h.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:e.tags.map((e,t)=>(0,h.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["#",e]},t))})]},e.id);var s})}),b&&(0,h.jsx)($,{isOpen:b,onClose:()=>j(!1),onExpenseCreated:async e=>{try{await c((0,p.A)((0,p.A)({},e),{},{groupId:t.id,createdBy:(null===a||void 0===a?void 0:a.id)||""})),j(!1)}catch(s){console.error("Failed to create expense:",s)}},group:t})]})};var z=a(9399),W=a(4129),H=a(7988),K=a(2704);const Y=e=>{let{isOpen:t,onClose:a,onRequestCreated:d,group:n}=e;const{user:c}=(0,i.A)(),{createPaymentRequest:o,isLoading:x}=(0,l.w)(),[g,u]=(0,s.useState)({toUserId:"",toGroupId:n.id,amount:"",description:"",category:"Food",dueDate:"",isRecurring:!1,recurringFrequency:"monthly",recurringInterval:1,attachments:[]}),[y,f]=(0,s.useState)(null),N=()=>{u({toUserId:"",toGroupId:n.id,amount:"",description:"",category:"Food",dueDate:"",isRecurring:!1,recurringFrequency:"monthly",recurringInterval:1,attachments:[]}),f(null)},v=()=>{N(),a()};return t?(0,h.jsx)(b.N,{children:(0,h.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,h.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,h.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50",onClick:v}),(0,h.jsxs)(r.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,h.jsx)(m.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create Payment Request"}),(0,h.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Request money from ",n.name," members"]})]})]}),(0,h.jsx)("button",{onClick:v,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,h.jsx)(j.A,{className:"w-5 h-5"})})]}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c)if(f(null),!g.amount||parseFloat(g.amount)<=0)f("Please enter a valid amount");else if(g.description.trim())try{const e={toUserId:g.toUserId||void 0,toGroupId:g.toGroupId||void 0,amount:parseFloat(g.amount),description:g.description,category:g.category,expiresAt:g.dueDate?new Date(g.dueDate).toISOString():new Date(Date.now()+6048e5).toISOString(),isRecurring:g.isRecurring,recurringSettings:g.isRecurring?{frequency:g.recurringFrequency,interval:g.recurringInterval}:void 0,attachments:g.attachments};d(e),N()}catch(t){f(t instanceof Error?t.message:"Failed to create payment request")}else f("Please enter a description")},className:"p-6 space-y-6",children:[y&&(0,h.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:y}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount *"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"$"})}),(0,h.jsx)("input",{type:"number",step:"0.01",min:"0",required:!0,value:g.amount,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{amount:e.target.value})),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"0.00"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),(0,h.jsx)("select",{value:g.category,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:["Food","Transportation","Entertainment","Utilities","Shopping","Travel","Healthcare","Education","Rent","Other"].map(e=>(0,h.jsx)("option",{value:e,children:e},e))})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),(0,h.jsx)("textarea",{required:!0,value:g.description,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"What is this payment for?"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date"}),(0,h.jsx)("input",{type:"date",value:g.dueDate,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{dueDate:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recipient"}),(0,h.jsxs)("select",{value:g.toUserId,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{toUserId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,h.jsx)("option",{value:"",children:"All Group Members"}),n.members.filter(e=>e.userId!==(null===c||void 0===c?void 0:c.id)&&e.isActive).map(e=>(0,h.jsxs)("option",{value:e.userId,children:[e.firstName," ",e.lastName]},e.userId))]})]})]}),(0,h.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,h.jsxs)("label",{className:"flex items-center space-x-3 mb-4",children:[(0,h.jsx)("input",{type:"checkbox",checked:g.isRecurring,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{isRecurring:e.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Make this a recurring request"})]}),g.isRecurring&&(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency"}),(0,h.jsx)("select",{value:g.recurringFrequency,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{recurringFrequency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"monthly",label:"Monthly"},{id:"yearly",label:"Yearly"}].map(e=>(0,h.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Interval"}),(0,h.jsx)("input",{type:"number",min:"1",value:g.recurringInterval,onChange:e=>u((0,p.A)((0,p.A)({},g),{},{recurringInterval:parseInt(e.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]})]}),(0,h.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attachments (Optional)"}),(0,h.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4",children:[(0,h.jsx)("input",{type:"file",multiple:!0,onChange:e=>{const t=e.target.files;if(t){const e=Array.from(t).map(e=>e.name);u(t=>(0,p.A)((0,p.A)({},t),{},{attachments:[...t.attachments,...e]}))}},className:"hidden",id:"file-upload"}),(0,h.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[(0,h.jsx)(K.A,{className:"w-8 h-8 text-gray-400"}),(0,h.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click to upload files or drag and drop"})]})]}),g.attachments.length>0&&(0,h.jsx)("div",{className:"mt-3 space-y-2",children:g.attachments.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,h.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e}),(0,h.jsx)("button",{type:"button",onClick:()=>(e=>{u(t=>(0,p.A)((0,p.A)({},t),{},{attachments:t.attachments.filter((t,a)=>a!==e)}))})(t),className:"text-red-500 hover:text-red-700",children:(0,h.jsx)(j.A,{className:"w-4 h-4"})})]},t))})]}),(0,h.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,h.jsx)("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",disabled:x||!g.amount||!g.description.trim(),className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:x?"Creating...":"Create Request"})]})]})]})]})})}):null},Q=e=>{let{group:t}=e;const{user:a}=(0,i.A)(),{paymentRequests:n,createPaymentRequest:c,updatePaymentRequest:o,isLoading:x}=(0,l.w)(),[g,y]=(0,s.useState)(!1),[b,j]=(0,s.useState)("all"),f=n.filter(e=>"all"===b||e.status===b),N=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),v=e=>{switch(e){case"accepted":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300";case"declined":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300";case"expired":case"cancelled":default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900 dark:text-yellow-300"}},k=e=>{switch(e){case"accepted":return(0,h.jsx)(O.A,{className:"w-4 h-4"});case"declined":case"cancelled":return(0,h.jsx)(T.A,{className:"w-4 h-4"});case"expired":return(0,h.jsx)(z.A,{className:"w-4 h-4"});default:return(0,h.jsx)(u.A,{className:"w-4 h-4"})}},w=e=>new Date(e)<new Date;return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Payment Requests"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Send and manage payment requests"})]}),(0,h.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors mt-4 sm:mt-0",children:[(0,h.jsx)(d.A,{className:"w-5 h-5"}),(0,h.jsx)("span",{children:"New Request"})]})]}),(0,h.jsx)("div",{className:"flex space-x-2",children:[{id:"all",label:"All",count:n.length},{id:"pending",label:"Pending",count:n.filter(e=>"pending"===e.status).length},{id:"accepted",label:"Accepted",count:n.filter(e=>"accepted"===e.status).length},{id:"declined",label:"Declined",count:n.filter(e=>"declined"===e.status).length},{id:"expired",label:"Expired",count:n.filter(e=>w(e.expiresAt)).length}].map(e=>(0,h.jsxs)("button",{onClick:()=>j(e.id),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(b===e.id?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[e.label," (",e.count,")"]},e.id))}),(0,h.jsx)("div",{className:"space-y-4",children:x?(0,h.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):0===f.length?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)(m.A,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payment requests found"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"all"===b?"Create your first payment request to get started.":"No ".concat(b," requests found.")}),"all"===b&&(0,h.jsxs)("button",{onClick:()=>y(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors",children:[(0,h.jsx)(d.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"New Request"})]})]}):f.map(e=>{const t=e.fromUserId===(null===a||void 0===a?void 0:a.id),s=w(e.expiresAt),l=!t&&"pending"===e.status&&!s;return(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.description}),(0,h.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(v(s?"expired":e.status)),children:[k(s?"expired":e.status),(0,h.jsx)("span",{className:"capitalize",children:s?"Expired":e.status})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(m.A,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:["$",e.amount.toFixed(2)]})]}),(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(W.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:t?"You requested":"Requested from you"})]}),(0,h.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,h.jsx)(H.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:N(e.createdAt)})]})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",e.amount.toFixed(2)]}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.currency})]})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Category"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.category})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Due Date"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:N(e.expiresAt)})]})]}),e.isRecurring&&e.recurringSettings&&(0,h.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[(0,h.jsx)("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300",children:"Recurring Request"}),(0,h.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[e.recurringSettings.frequency," - Every ",e.recurringSettings.interval," ",e.recurringSettings.frequency]})]}),e.attachments&&e.attachments.length>0&&(0,h.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Attachments"}),(0,h.jsx)("div",{className:"flex space-x-2",children:e.attachments.map((e,t)=>(0,h.jsxs)("span",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded",children:["Attachment ",t+1]},t))})]})]}),l&&(0,h.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,h.jsx)("button",{onClick:()=>(async e=>{if(a)try{await o(e,{status:"accepted",paidAt:(new Date).toISOString()})}catch(t){console.error("Failed to accept payment request:",t)}})(e.id),className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors",children:"Accept & Pay"}),(0,h.jsx)("button",{onClick:()=>(async e=>{if(a)try{await o(e,{status:"declined"})}catch(t){console.error("Failed to decline payment request:",t)}})(e.id),className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:"Decline"})]}),t&&"pending"===e.status&&!s&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900 rounded-lg",children:(0,h.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Waiting for response from recipient"})}),s&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900 rounded-lg",children:(0,h.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:"This request has expired"})})]},e.id)})}),g&&(0,h.jsx)(Y,{isOpen:g,onClose:()=>y(!1),onRequestCreated:async e=>{try{await c((0,p.A)((0,p.A)({},e),{},{fromUserId:(null===a||void 0===a?void 0:a.id)||"",currency:t.settings.currency})),y(!1)}catch(s){console.error("Failed to create payment request:",s)}},group:t})]})},V=()=>{const{user:e}=(0,i.A)(),{groups:t,currentGroup:a,setCurrentGroup:m,isLoading:g,error:u,loadGroups:p}=(0,l.w)(),[b,j]=(0,s.useState)(!1),[f,N]=(0,s.useState)("overview"),v=()=>{j(!0)};return g&&0===t.length?(0,h.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):(0,h.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,h.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"\ud83d\udc65 Groups"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage shared expenses and group payments"})]}),(0,h.jsxs)("button",{onClick:v,className:"flex items-center space-x-2 px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors mt-4 sm:mt-0",children:[(0,h.jsx)(d.A,{className:"w-5 h-5"}),(0,h.jsx)("span",{children:"Create Group"})]})]}),u&&(0,h.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:u}),a?(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:a.color},children:a.name.charAt(0)}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.name}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:a.description})]})]}),(0,h.jsx)("div",{className:"flex items-center space-x-2",children:(0,h.jsx)("button",{onClick:()=>m(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,h.jsx)(c.A,{className:"w-5 h-5"})})})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",a.totalExpenses.toFixed(2)]}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Expenses"})]}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.totalTransactions}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Transactions"})]}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.members.length}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Members"})]}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.members.filter(e=>e.isActive).length}),(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"})]})]})]}),(0,h.jsx)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[{id:"overview",label:"Overview",icon:n.A},{id:"expenses",label:"Expenses",icon:o.A},{id:"analytics",label:"Analytics",icon:o.A},{id:"requests",label:"Requests",icon:x.A}].map(e=>{const t=e.icon;return(0,h.jsxs)("button",{onClick:()=>N(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(f===e.id?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:[(0,h.jsx)(t,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:e.label})]},e.id)})}),(0,h.jsxs)("div",{className:"mt-6",children:["overview"===f&&(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Expenses"}),(0,h.jsx)("div",{className:"space-y-3",children:a.members.slice(0,3).map(e=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.firstName.charAt(0)})}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[e.firstName," ",e.lastName]}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.role})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.totalContributed.toFixed(2)]}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"contributed"})]})]},e.id))})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,h.jsxs)("button",{onClick:()=>N("expenses"),className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-shadow text-left",children:[(0,h.jsx)(o.A,{className:"w-8 h-8 text-blue-500 mb-3"}),(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Manage Expenses"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Add new expenses and track payments"})]}),(0,h.jsxs)("button",{onClick:()=>N("requests"),className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-shadow text-left",children:[(0,h.jsx)(x.A,{className:"w-8 h-8 text-green-500 mb-3"}),(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Payment Requests"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Send and manage payment requests"})]})]})]}),"expenses"===f&&(0,h.jsx)(L,{group:a}),"analytics"===f&&(0,h.jsx)(U,{group:a}),"requests"===f&&(0,h.jsx)(Q,{group:a})]})]}):(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(e=>(0,h.jsx)(y,{group:e,onClick:()=>(e=>{m(e),N("overview")})(e)},e.id)),0===t.length&&(0,h.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,h.jsx)(n.A,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No groups yet"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Create your first group to start sharing expenses with friends and family."}),(0,h.jsxs)("button",{onClick:v,className:"inline-flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-medium transition-colors",children:[(0,h.jsx)(d.A,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"Create Group"})]})]})]})]}),b&&(0,h.jsx)(k,{isOpen:b,onClose:()=>j(!1),onGroupCreated:()=>{j(!1),p()}})]})}}}]);
//# sourceMappingURL=354.d0b049ef.chunk.js.map