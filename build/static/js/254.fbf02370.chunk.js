"use strict";(self.webpackChunkzappay=self.webpackChunkzappay||[]).push([[254],{5254:(e,s,i)=>{i.r(s),i.d(s,{default:()=>M});var r=i(9379),n=i(5043),l=i(6692),c=i(172),a=i(5895),t=i(2097),o=i(6803),d=i(1244),x=i(6128),h=i(3309),j=i(2843),A=i(6154),p=i(256),u=i(9067),m=i(5998),v=i(7471),y=i(8259),b=i(4799),g=i(7443),f=i(756),C=i(6172),S=i(1341),w=i(4375),k=i(3759),R=i(5315),I=i(2455),D=i(9801),N=i(6185),T=i(3023),z=i(1911),L=i(8776),W=i(5877),P=i(5979),U=i(3201),O=i(7305),B=i(7601),F=i(9302),G=i(3745),_=i(1191),E=i(6013),J=i(1101),K=i(579);const M=()=>{const[e,s]=(0,n.useState)(null),[i,M]=(0,n.useState)([]),[Y,H]=(0,n.useState)([]),[V,q]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(null),[Z,$]=(0,n.useState)(0),[ee,se]=(0,n.useState)(!1),[ie,re]=(0,n.useState)(null),[ne,le]=(0,n.useState)("all"),[ce,ae]=(0,n.useState)("");(0,n.useEffect)(()=>{te()},[]);const te=async()=>{q(!0);try{const e=await fetch("/api/compliance/metrics"),i=await e.json();s(i);const r=await fetch("/api/compliance/suspicious-activities"),n=await r.json();M(n);const l=await fetch("/api/compliance/reports"),c=await l.json();H(c)}catch(e){X("Failed to load compliance data")}finally{q(!1)}},oe=async(e,s)=>{try{(await fetch("/api/compliance/suspicious-activities/".concat(e,"/review"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})})).ok&&M(i=>i.map(i=>i.id===e?(0,r.A)((0,r.A)({},i),{},{status:s}):i))}catch(i){X("Failed to update activity status")}},de=i.filter(e=>{const s="all"===ne||e.status===ne,i=""===ce||e.userId.toLowerCase().includes(ce.toLowerCase())||e.type.toLowerCase().includes(ce.toLowerCase());return s&&i}),xe=e=>e>=80?"error":e>=60?"warning":e>=40?"info":"success",he=e=>{switch(e){case"pending":return"warning";case"reviewed":return"info";case"resolved":return"success";default:return"default"}};return V&&!e?(0,K.jsx)(l.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,K.jsx)(c.A,{})}):(0,K.jsxs)(l.A,{sx:{p:3},children:[(0,K.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,K.jsxs)(a.A,{variant:"h4",children:[(0,K.jsx)(_.A,{sx:{mr:2,verticalAlign:"middle"}}),"Compliance Dashboard"]}),(0,K.jsxs)(l.A,{children:[(0,K.jsx)(t.A,{variant:"outlined",startIcon:(0,K.jsx)(F.A,{}),onClick:te,sx:{mr:2},children:"Refresh"}),(0,K.jsx)(t.A,{variant:"contained",startIcon:(0,K.jsx)(P.A,{}),onClick:()=>se(!0),children:"Generate Report"})]})]}),Q&&(0,K.jsx)(o.A,{severity:"error",sx:{mb:3},onClose:()=>X(null),children:Q}),e&&(0,K.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[(0,K.jsx)("div",{children:(0,K.jsx)(d.A,{children:(0,K.jsx)(x.A,{children:(0,K.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,K.jsx)(B.A,{color:"primary",sx:{mr:2}}),(0,K.jsxs)(l.A,{children:[(0,K.jsx)(a.A,{variant:"h4",children:e.totalUsers}),(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Total Users"})]})]})})})}),(0,K.jsx)("div",{className:"col-span-1 sm:col-span-2 md:col-span-3",children:(0,K.jsx)(d.A,{children:(0,K.jsx)(x.A,{children:(0,K.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,K.jsx)(U.A,{color:"success",sx:{mr:2}}),(0,K.jsxs)(l.A,{children:[(0,K.jsx)(a.A,{variant:"h4",children:e.verifiedUsers}),(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Verified Users"})]})]})})})}),(0,K.jsx)("div",{className:"col-span-1 sm:col-span-2 md:col-span-3",children:(0,K.jsx)(d.A,{children:(0,K.jsx)(x.A,{children:(0,K.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,K.jsx)(J.A,{color:"warning",sx:{mr:2}}),(0,K.jsxs)(l.A,{children:[(0,K.jsx)(a.A,{variant:"h4",children:e.suspiciousActivities}),(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Suspicious Activities"})]})]})})})}),(0,K.jsx)("div",{className:"col-span-1 sm:col-span-2 md:col-span-3",children:(0,K.jsx)(d.A,{children:(0,K.jsx)(x.A,{children:(0,K.jsxs)(l.A,{display:"flex",alignItems:"center",children:[(0,K.jsx)(E.A,{color:"info",sx:{mr:2}}),(0,K.jsxs)(l.A,{children:[(0,K.jsxs)(a.A,{variant:"h4",children:[e.complianceScore,"%"]}),(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Compliance Score"})]})]})})})})]}),(0,K.jsx)(l.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,K.jsxs)(h.A,{value:Z,onChange:(e,s)=>$(s),children:[(0,K.jsx)(j.A,{label:"Suspicious Activities"}),(0,K.jsx)(j.A,{label:"Compliance Reports"}),(0,K.jsx)(j.A,{label:"KYC Status"}),(0,K.jsx)(j.A,{label:"Transaction Monitoring"})]})}),0===Z&&(0,K.jsx)(d.A,{children:(0,K.jsxs)(x.A,{children:[(0,K.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,K.jsx)(a.A,{variant:"h6",children:"Suspicious Activities"}),(0,K.jsxs)(l.A,{display:"flex",gap:2,children:[(0,K.jsx)(A.A,{size:"small",placeholder:"Search activities...",value:ce,onChange:e=>ae(e.target.value),InputProps:{startAdornment:(0,K.jsx)(G.A,{sx:{mr:1,color:"text.secondary"}})}}),(0,K.jsxs)(p.A,{size:"small",sx:{minWidth:120},children:[(0,K.jsx)(u.A,{children:"Status"}),(0,K.jsxs)(m.A,{value:ne,onChange:e=>le(e.target.value),children:[(0,K.jsx)(v.A,{value:"all",children:"All"}),(0,K.jsx)(v.A,{value:"pending",children:"Pending"}),(0,K.jsx)(v.A,{value:"reviewed",children:"Reviewed"}),(0,K.jsx)(v.A,{value:"resolved",children:"Resolved"})]})]})]})]}),(0,K.jsx)(y.A,{component:b.A,children:(0,K.jsxs)(g.A,{children:[(0,K.jsx)(f.A,{children:(0,K.jsxs)(C.A,{children:[(0,K.jsx)(S.A,{children:"User ID"}),(0,K.jsx)(S.A,{children:"Type"}),(0,K.jsx)(S.A,{children:"Amount"}),(0,K.jsx)(S.A,{children:"Risk Score"}),(0,K.jsx)(S.A,{children:"Status"}),(0,K.jsx)(S.A,{children:"Date"}),(0,K.jsx)(S.A,{children:"Actions"})]})}),(0,K.jsx)(w.A,{children:de.map(e=>(0,K.jsxs)(C.A,{children:[(0,K.jsx)(S.A,{children:e.userId}),(0,K.jsx)(S.A,{children:e.type}),(0,K.jsxs)(S.A,{children:[e.currency," ",e.amount.toLocaleString()]}),(0,K.jsx)(S.A,{children:(0,K.jsx)(k.A,{label:e.riskScore,color:xe(e.riskScore),size:"small"})}),(0,K.jsx)(S.A,{children:(0,K.jsx)(k.A,{label:e.status,color:he(e.status),size:"small"})}),(0,K.jsx)(S.A,{children:new Date(e.createdAt).toLocaleDateString()}),(0,K.jsx)(S.A,{children:(0,K.jsx)(t.A,{size:"small",onClick:()=>re(e),children:"Review"})})]},e.id))})]})})]})}),1===Z&&(0,K.jsx)(d.A,{children:(0,K.jsxs)(x.A,{children:[(0,K.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Compliance Reports"}),(0,K.jsx)(R.A,{children:Y.map(e=>(0,K.jsxs)(I.Ay,{children:[(0,K.jsx)(D.A,{children:(0,K.jsx)(P.A,{})}),(0,K.jsx)(N.A,{primary:"".concat(e.type," Report"),secondary:"".concat(e.period.start," to ").concat(e.period.end," - ").concat(e.status)}),(0,K.jsx)(t.A,{size:"small",startIcon:(0,K.jsx)(O.A,{}),onClick:()=>{},children:"Download"})]},e.id))})]})}),(0,K.jsxs)(T.A,{open:!!ie,onClose:()=>re(null),maxWidth:"md",fullWidth:!0,children:[(0,K.jsx)(z.A,{children:"Review Suspicious Activity"}),(0,K.jsx)(L.A,{children:ie&&(0,K.jsxs)(l.A,{children:[(0,K.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Activity Details"}),(0,K.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,K.jsxs)("div",{className:"col-span-6",children:[(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"User ID"}),(0,K.jsx)(a.A,{variant:"body1",children:ie.userId})]}),(0,K.jsxs)("div",{className:"col-span-6",children:[(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Type"}),(0,K.jsx)(a.A,{variant:"body1",children:ie.type})]}),(0,K.jsxs)("div",{className:"col-span-6",children:[(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Amount"}),(0,K.jsxs)(a.A,{variant:"body1",children:[ie.currency," ",ie.amount.toLocaleString()]})]}),(0,K.jsxs)("div",{className:"col-span-6",children:[(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Risk Score"}),(0,K.jsx)(k.A,{label:ie.riskScore,color:xe(ie.riskScore)})]}),(0,K.jsxs)("div",{className:"col-span-12",children:[(0,K.jsx)(a.A,{variant:"body2",color:"text.secondary",children:"Description"}),(0,K.jsx)(a.A,{variant:"body1",children:ie.description})]})]})]})}),(0,K.jsxs)(W.A,{children:[(0,K.jsx)(t.A,{onClick:()=>re(null),children:"Cancel"}),(0,K.jsx)(t.A,{color:"warning",onClick:()=>{ie&&(oe(ie.id,"reviewed"),re(null))},children:"Mark as Reviewed"}),(0,K.jsx)(t.A,{color:"success",onClick:()=>{ie&&(oe(ie.id,"resolved"),re(null))},children:"Resolve"})]})]}),(0,K.jsxs)(T.A,{open:ee,onClose:()=>se(!1),maxWidth:"sm",fullWidth:!0,children:[(0,K.jsx)(z.A,{children:"Generate Compliance Report"}),(0,K.jsx)(L.A,{children:(0,K.jsxs)(l.A,{sx:{pt:2},children:[(0,K.jsxs)(p.A,{fullWidth:!0,sx:{mb:2},children:[(0,K.jsx)(u.A,{children:"Report Type"}),(0,K.jsxs)(m.A,{value:"comprehensive",label:"Report Type",children:[(0,K.jsx)(v.A,{value:"comprehensive",children:"Comprehensive Report"}),(0,K.jsx)(v.A,{value:"suspicious_activity",children:"Suspicious Activity Report"}),(0,K.jsx)(v.A,{value:"kyc_status",children:"KYC Status Report"}),(0,K.jsx)(v.A,{value:"transaction_summary",children:"Transaction Summary"})]})]}),(0,K.jsx)(A.A,{fullWidth:!0,label:"Start Date",type:"date",InputLabelProps:{shrink:!0},sx:{mb:2}}),(0,K.jsx)(A.A,{fullWidth:!0,label:"End Date",type:"date",InputLabelProps:{shrink:!0}})]})}),(0,K.jsxs)(W.A,{children:[(0,K.jsx)(t.A,{onClick:()=>se(!1),children:"Cancel"}),(0,K.jsx)(t.A,{variant:"contained",onClick:()=>{(async(e,s,i)=>{q(!0);try{const r=await fetch("/api/compliance/reports/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:s,endDate:i,reportType:e})}),n=await r.json();n.success?(H(e=>[...e,n.report]),se(!1)):X("Failed to generate report")}catch(r){X("Network error generating report")}finally{q(!1)}})("comprehensive","2025-01-01","2025-12-31")},disabled:V,children:V?(0,K.jsx)(c.A,{size:20}):"Generate Report"})]})]})]})}}}]);
//# sourceMappingURL=254.fbf02370.chunk.js.map